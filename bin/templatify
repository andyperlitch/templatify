#!/usr/bin/env node

var path = require('path');
var http = require('http');
var nopt = require('nopt');

var compiler = require('./templates/compiler');

var opts = nopt({
  prefix: String,
  hold: String
});

var files = opts.argv.remain;
if(!files.length) throw new Error('You need to provide the list of files to compile.');

opts.files = files;
opts.hold = opts.hold || 'JST';

compiler(opts)
  .engine('jst', compiler.engines.underscore)
  .engine('html', compiler.engines.underscore)
  .directory(function(err) {
    if(err) throw err;
    console.error('... Done ...');
  });
